require 'matrix'

m = Matrix[[0,0,0,0,0,0,1,0,1],
           [1,0,0,0,0,0,0,0,0],
           [0,1,0,0,0,0,0,0,0],
           [0,0,1,0,0,0,0,0,0],
           [0,0,0,1,0,0,0,0,0],
           [0,0,0,0,1,0,0,0,0],
           [0,0,0,0,0,1,0,0,0],
           [0,0,0,0,0,0,1,0,0],
           [0,0,0,0,0,0,0,1,0]]

d = (m**80000).row_vectors.map{ _1.to_a.sum}
puts d.zip([0,1,1,2,1,0,0,0,0]).map{|a,b|a*b}.sum